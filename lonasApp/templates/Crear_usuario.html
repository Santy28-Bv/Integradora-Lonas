{% extends "layout.html" %}

{% block title %}
    Crea tu Usuario
{% endblock %}

{% block body %}
    <!-- Modal para Términos y Condiciones -->
    <div class="modal fade" id="terminosModal" tabindex="-1" role="dialog" aria-labelledby="terminosModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="terminosModalLabel">Términos y condiciones de uso:</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Aceptación 
                        Al elegir nuestra aplicación web, acepta los términos y condiciones de uso sobre el producto, los derechos de autor están reservados, único uso es para el negocio Alquiladora el Carmen lonas y carpas de sus empleados y clientes.
                        aceptar los términos y condiciones acepta cada uno de los puntos de los términos y condiciones, dado caso que no acepte los términos y condiciones no podrá usar la Aplicación Web.
                        Responsabilidades del propietario.
                        Usted es responsable del resguardo y mantenimiento, como la rentabilidad del dominio en línea del producto, tanto de tener un equipo de cómputo con las características recomendadas para su uso adecuado.
                        Soporte, actualización y mantenimiento
                        Nos comprometemos a dar soporte técnico siempre y cuando el cliente acepte estos términos y condiciones, mas aparte si es solicitado por el cliente, dado caso que usted no quiera nuestros servicios para el mantenimiento de esta aplicación web no se le cobrara, pero se quedara sin mantenimiento por parte de nosotros, donde la opción de mantenimiento puede ser una de estas que usted elija, mensualmente o anualmente teniendo sus costos respectivos.
                        Al aceptar los términos y condiciones usted se compromete a conocer las funciones del sistema, así como capacitar a sus empleados para que usen el sistema de forma óptima.
                        </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn borderr opacity colorR" id="aceptarTerminos">Aceptar</button>
                    <button type="button" class="btn borderr opacity colorR" id="rechazarTerminos">Rechazar</button>
                </div>
            </div>
        </div>
    </div>

    <form id="formularioUsuario" action="{{ url_for('formulario_usuario') }}" method="POST">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        
        <h1 class="color">PARA EMPEZAR A CREAR TU CUENTA AGREGA UN CORREO Y UNA CONTRASEÑA ;)</h1>

        <!-- Alerta para campos vacíos -->
        <div id="alertCamposVacios" class="alert alert-danger mt-3" style="display: none;">
            Por favor, llena todos los campos antes de enviar el formulario.
        </div>
        
        <!-- Campo correo -->
        <div class="form-group">
            <label class="blancoR" for="correo">Correo</label>
            <input type="email" class="form-control borderR bottonR" id="correo" name="correo" placeholder="correo@example.com" aria-describedby="emailHelp">
        </div>
        
        <!-- Campo de Contraseña -->
        <div class="form-group">
            <label class="blancoR" for="password">Contraseña</label>
            <input type="password" class="form-control borderR bottonR" id="password" name="password" placeholder="Tu contraseña">
        </div>

        <!-- Checkbox para ver la contraseña -->
        <div class="form-group form-check">
            <input type="checkbox" class="form-check-input" id="togglePassword">
            <label class="form-check-label blancoR" for="togglePassword">Ver contraseña</label>
        </div>
        
        <!-- Botones para enviar y cancelar -->
        <button type="submit" class="btn borderr opacity colorR">Siguiente</button>
        <a href="{{ url_for('login') }}" class="btn borderr opacity colorR">Cancelar</a>
    </form>
    
    <!-- Scripts de Bootstrap y Validación -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct" crossorigin="anonymous"></script>

    <script>
        // Mostrar/ocultar la contraseña
        document.getElementById('togglePassword').addEventListener('change', function () {
            const passwordField = document.getElementById('password');
            if (this.checked) {
                passwordField.setAttribute('type', 'text');
            } else {
                passwordField.setAttribute('type', 'password');
            }
        });

        // Validación del formulario antes de enviar
        document.getElementById('formularioUsuario').addEventListener('submit', function(event) {
            event.preventDefault(); // Evitar el envío inmediato del formulario
            var correo = document.getElementById('correo').value;
            var password = document.getElementById('password').value;

            if (!correo || !password) {
                // Mostrar la alerta si hay campos vacíos
                document.getElementById('alertCamposVacios').style.display = 'block';
            } else {
                // Mostrar el modal de términos y condiciones
                $('#terminosModal').modal('show');
            }
        });

        // Controlar la aceptación de los términos
        document.getElementById('aceptarTerminos').addEventListener('click', function () {
            $('#terminosModal').modal('hide');
            document.getElementById('formularioUsuario').submit(); // Enviar el formulario
        });

        // Controlar el rechazo de los términos
        document.getElementById('rechazarTerminos').addEventListener('click', function () {
            $('#terminosModal').modal('hide');
            alert("Debe aceptar los términos y condiciones para continuar.");
        });
    </script>

    <style>
        .border12{
            border-radius: 100px;
            background: rgb(63,94,251);
            background: linear-gradient(90deg, rgb(23, 57, 227) 0%, rgba(104,59,215,1) 100%);
            border: 2px solid rgb(255, 255, 255);
        }

        .opacity:hover{
            opacity: .8;
        }

        .blancoR{
            color: rgb(252, 252, 252);
        }

        .borderR{
            color: aliceblue;
            border-radius: 100px;
            border: 2px solid rgb(255, 255, 255);
            margin-right: 1px;
        }

        .bottonR{
            background: rgba(28, 28, 28, 0.895);
        }

        .borderr{
            border-radius: 100px;
            background: linear-gradient(90deg, rgb(23, 57, 227) 0%, rgba(104,59,215,1) 100%);
            text-decoration: none;
        }

        .colorR{
            color: rgb(255, 255, 255);
        }
    </style>
{% endblock %}
